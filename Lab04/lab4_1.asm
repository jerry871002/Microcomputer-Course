	ORG 0000H
	AJMP MAIN
	ORG 0050H
MAIN:
	MOV R0, #0H
	MOV R1, #0H
	MOV R2, #0H
	MOV R3, #0H

LOOP1:
	ACALL SHOW

	INC R0
	CJNE R0, #0AH, LOOP1
	MOV R0, #0H
LOOP2:
	INC R1
	CJNE R1, #0AH, LOOP1
	MOV R1, #0H
LOOP3:
	INC R2
	CJNE R2, #0AH, LOOP1
	MOV R2, #0H
LOOP4:
	INC R3
	CJNE R3, #0AH, LOOP1
	MOV R3, #0H
	AJMP LOOP1
SHOW:
	MOV R5, #0H
	MOV R6, #0H
	MOV R7, #0H
SHOWLOOP:
;First digjt
	MOV DPTR, #POS
	MOV A, #0H
	MOVC A, @A+DPTR
	MOV P2, A

	MOV DPTR, #NUMTABLE
	MOV A, R0
	MOVC A, @A+DPTR
	MOV P1, A

	ACALL DELAY
	MOV P1, #0FFH
;Second digit
	MOV DPTR, #POS
	MOV A, #1H
	MOVC A, @A+DPTR
	MOV P2, A

	MOV DPTR, #NUMTABLE
	MOV A, R1
	MOVC A, @A+DPTR
	MOV P1, A

	ACALL DELAY
	MOV P1, #0FFH	
;Third digit
	MOV DPTR, #POS
	MOV A, #2H
	MOVC A, @A+DPTR
	MOV P2, A

	MOV DPTR, #NUMTABLE
	MOV A, R2
	MOVC A, @A+DPTR
	MOV P1, A

	ACALL DELAY
	MOV P1, #0FFH
;Forth digit
	MOV DPTR, #POS
	MOV A, #3H
	MOVC A, @A+DPTR
	MOV P2, A

	MOV DPTR, #NUMTABLE
	MOV A, R3
	MOVC A, @A+DPTR
	MOV P1, A

	ACALL DELAY
	MOV P1, #0FFH

	INC R5
	CJNE R5, #0FFH, SHOWLOOP
	MOV R5, #0
	INC R6
	CJNE R6, #0FFH, SHOWLOOP
	MOV R6, #0
	INC R7
	CJNE R7, #02H, SHOWLOOP

	RET
;===========================	
DELAY:
	MOV 20H, #0FFH
DELAY1:
	MOV 21H, #01H
DELAY2:
	MOV 22H, #01H
DELAY3:
	DJNZ 20H, DELAY3
	DJNZ 21H, DELAY2
	DJNZ 22H, DELAY1
	RET
;===========================
NUMTABLE:
	DB 0C0H ;0
	DB 0F9H ;1
	DB 0A4H ;2
	DB 0B0H ;3
	DB 099H ;4
	DB 092H ;5
	DB 082H ;6
	DB 0F8H ;7
	DB 080H ;8
	DB 090H ;9
;===========================
POS:
	DB 0F7H, 0FBH, 0FDH, 0FEH