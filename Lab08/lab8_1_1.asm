	ORG	0000H
	JMP	START
	ORG	0050H
START:
	MOV	DPTR, #TABLE
	;MOV R5, #40
	;CALL DELAY

	MOV	A, #00111000B  ;採用8位元資料存取/雙列字5*7點矩陣字型
	CALL COMMAND
	;MOV R5, #2
	;CALL DELAY

	MOV	A, #00001100B
	CALL COMMAND
	;MOV R5, #2
	;CALL DELAY

	MOV	A, #00000001B
	CALL COMMAND
	;MOV R5, #45	 
	;CALL DELAY

	MOV	A, #10000000B
	CALL COMMAND
	;MOV R5, #5
	;CALL DELAY
AGAIN:
	CLR	A
	MOVC A, @A+DPTR
	INC	DPTR
	JZ AGAIN1
	CALL SENDDATA
	JMP	AGAIN
AGAIN1:
	JMP	START
COMMAND:
	MOV	P0, A
	MOV	P1, #00000100B  ;E=1 , RW=0 , RS=0
	MOV R5, #5
	CALL DELAY

	MOV	P1, #00000000B	;E=0 , RW=0 , RS=0
	MOV	R5, #5
	CALL DELAY			;延遲等訊號處裡完畢
	RET
SENDDATA:
	MOV	P0, A
	MOV	P1, #00000101B	;E=1, RW=0, RS=1
	MOV R5, #2
	CALL DELAY
	MOV	P1, #00000001B	;E=0
	MOV	R5, #2
	CALL	DELAY
	RET
DELAY:
	MOV	R6, #100
DELAY1:
	MOV	R7, #100
DELAY2:
	DJNZ R7,DELAY2
	DJNZ R6,DELAY1
	DJNZ R5,DELAY
	RET
TABLE:
	DB "0610780",0
END
