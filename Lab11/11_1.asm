	SPEAKER EQU P0.0
	TONE1 EQU R0 
	TONE2 EQU R1 
	TEMPO EQU R2 
	TIME EQU R3 
	MCOUNT EQU  R4 

	ORG 0000H 
	JMP MAIN 
	ORG 000BH
	JMP INTERRUPT
	ORG 0050H 

MAIN: 
	MOV IE, #10000010B
 	MOV TMOD, #1
  	MOV DPTR, #SCALE 
 	MOV MCOUNT, #0
	MOV R5, #7			;七個音

BEGIN: 
	MOV A, MCOUNT
  	MOVC A, @A+DPTR 
 	MOV TONE1, A 
	INC MCOUNT 

 	MOV A, MCOUNT 
 	MOVC A, @A+DPTR 
 	MOV TONE2, A 
 	INC MCOUNT 

 	MOV A, MCOUNT 
 	MOVC A, @A+DPTR 
 	MOV TEMPO, A 
	INC MCOUNT

 	MOV TH0, TONE1
 	MOV TL0, TONE2

 	ACALL SOUND 

 	DJNZ R5, BEGIN 
	MOV MCOUNT, #0
 	JMP MAIN 

SOUND:
	SETB TR0 
 	MOV TIME, #2  
SOUND1: 
	CJNE TEMPO, #0, SOUND1
	CLR TR0
	RET

INTERRUPT:
	CLR TF0
	MOV TH0, TONE1
	MOV TL0, TONE2
	CPL SPEAKER
	DJNZ TIME, RETURN
	MOV TIME, #2
	DEC TEMPO
RETURN:
	RETI

SCALE:
	DB 241, 23, 131
	DB 242, 183, 147
	DB 244, 42, 165
	DB 244, 215, 175
	DB 246, 9, 196
	DB 247, 32, 220
	DB 248, 24, 247
	
END