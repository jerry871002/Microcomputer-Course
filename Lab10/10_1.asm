	ORG 0000H
	JMP INITIAL
	ORG 0003H
	JMP INTERRUPT
	ORG 0050H

INITIAL:
	SETB IT0			;edge trigger	
	SETB PX0			;INT0 interrupt high priority
	SETB EX0			;將外部中斷致能旗標設為1
	CLR IE0				;將IE0旗標設為0
	SETB EA				;開啟所有中斷功能
	MOV R4, #0			;R4為來回甩動的次數(來回一次會加2)
	MOV DPTR, #TABLE0	;將DPTR設為第一個字0
START:
	JMP START			;如果中斷沒有發生就在這裡無限迴圈

INTERRUPT:
NUM1:
	CJNE R4, #8, NUM2	;R4不等於8就跳至NUM2
	MOV DPTR, #TABLE6	;將DPTR設為下一個字6
	INC R4				;搖一次(左右來回)會加二
	JMP LED_SHOW		;顯示
NUM2:
	CJNE R4, #16, NUM3	;R4不等於16就跳至NUM3
	MOV DPTR, #TABLE1	;將DPTR設為下一個字1
	INC R4				;搖一次(左右來回)會加二
	JMP LED_SHOW		;顯示
NUM3:
	CJNE R4, #24, NUM4	;R4不等於24就跳至NUM4
	MOV DPTR, #TABLE0	;將DPTR設為下一個字0
	INC R4				;搖一次(左右來回)會加二
	JMP LED_SHOW		;顯示
NUM4:
	CJNE R4, #32, NUM5	;R4不等於32就跳至NUM5
	MOV DPTR, #TABLE7	;將DPTR設為下一個字7
	INC R4				;搖一次(左右來回)會加二
	JMP LED_SHOW		;顯示
NUM5:
	CJNE R4, #40, NUM6	;R4不等於40就跳至NUM6
	MOV DPTR, #TABLE8	;將DPTR設為下一個字8
	INC R4				;搖一次(左右來回)會加二
	JMP LED_SHOW		;顯示
NUM6:
	CJNE R4, #48, FIN	;R4不等於48就跳至FIN
	MOV DPTR, #TABLE0	;將DPTR設為下一個字0
	MOV R4, #0			;搖一次(左右來回)會加二
	JMP LED_SHOW		;顯示
FIN:
	INC R4
LED_SHOW:
	MOV R0, #72
	MOV R1, #24
NEXT_COLUMN:
	CALL READ_BYTE
	MOV P0, A
	CALL READ_BYTE
	MOV P2, A
	CALL READ_BYTE
	MOV P1, A
	CALL DELAY
	DJNZ R1, NEXT_COLUMN
	RETI

;====READ 1 BYTE FROM TABLE==== 
READ_BYTE:
	DEC R0
	MOV A, R0
	MOVC A, @A+DPTR 
	CPL A
	RET

DELAY:
	MOV R5, #20H
DELAY1:
	MOV R6, #25H
DELAY2:
	MOV R7, #05H
DELAY3:
	DJNZ R7, DELAY3
	DJNZ R6, DELAY2
	DJNZ R5, DELAY1
	RET

TABLE0:
	DB 0000000B,00000000B,00000000B
    DB 0000001B,11111111B,11100000B
    DB 0000111B,11111111B,11111000B
    DB 0001111B,11111111B,11111100B
    DB 0001111B,00000000B,00111100B
    DB 0011000B,00000000B,00001100B
    DB 0001100B,00000000B,00001100B
    DB 0001111B,10000000B,01111100B
    DB 0001111B,11111111B,11111100B
    DB 0000111B,11111111B,11111000B
    DB 0000000B,11111111B,11000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
TABLE6:
	DB 0000000B,00000000B,00000000B
    DB 0000001B,11111111B,11100000B
    DB 0000111B,11111111B,11111000B
    DB 0001111B,11111111B,11111100B
    DB 0001111B,00000110B,00111100B
    DB 0001100B,00000010B,00001100B
    DB 0011000B,00000011B,00000100B
    DB 0001110B,00000110B,01111100B
    DB 0001111B,11111110B,01111100B
    DB 0000111B,11111110B,01111000B
    DB 0000011B,11111000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
TABLE1:
	DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0001000B,00000000B,00011000B
    DB 0001000B,00000000B,00011000B
    DB 0001111B,11111111B,11111000B
    DB 0001111B,11111111B,11111100B
    DB 0001111B,11111111B,11111100B
    DB 0001000B,00000000B,00000000B
    DB 0001000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
TABLE7:
	DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,01111100B
    DB 0000000B,00000000B,01111100B
    DB 0000000B,00000000B,00011100B
    DB 0000111B,00000000B,00001100B
    DB 0001111B,11111000B,00001100B
    DB 0001111B,11111110B,00001100B
    DB 0001111B,11111111B,11001100B
    DB 0000000B,00000011B,11101100B
    DB 0000000B,00000000B,01111100B
    DB 0000000B,00000000B,00111100B
    DB 0000000B,00000000B,00001100B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
TABLE8:
	DB 0000000B,10000000B,00000000B
    DB 0000011B,11110000B,11110000B
    DB 0000111B,11111011B,11111000B
    DB 0001111B,11111111B,11111100B
    DB 0001100B,00011111B,10001100B
    DB 0011000B,00001111B,00000100B
    DB 0011000B,00011110B,00001100B
    DB 0001100B,00111111B,10011100B
    DB 0001111B,11111011B,11111100B
    DB 0001111B,11110011B,11111000B
    DB 0000011B,11100000B,11110000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B
    DB 0000000B,00000000B,00000000B

END
